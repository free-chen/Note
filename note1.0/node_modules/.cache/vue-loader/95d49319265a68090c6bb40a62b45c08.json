{"remainingRequest":"C:\\Users\\Free Chen\\Desktop\\GP\\note1.0\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Free Chen\\Desktop\\GP\\note1.0\\src\\pages\\login\\login.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\Free Chen\\Desktop\\GP\\note1.0\\src\\pages\\login\\login.vue","mtime":1630574658010},{"path":"C:\\Users\\Free Chen\\Desktop\\GP\\note1.0\\node_modules\\css-loader\\dist\\cjs.js","mtime":1646840428982},{"path":"C:\\Users\\Free Chen\\Desktop\\GP\\note1.0\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1646840431770},{"path":"C:\\Users\\Free Chen\\Desktop\\GP\\note1.0\\node_modules\\postcss-loader\\src\\index.js","mtime":1646840430064},{"path":"C:\\Users\\Free Chen\\Desktop\\GP\\note1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646840428356},{"path":"C:\\Users\\Free Chen\\Desktop\\GP\\note1.0\\node_modules\\vue-loader\\lib\\index.js","mtime":1646840430419}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5zZXBhcmF0b3Igew0KICBkaXNwbGF5OiAtd2Via2l0LWJveDsNCiAgZGlzcGxheTogLW1zLWZsZXhib3g7DQogIGRpc3BsYXk6IGZsZXg7DQogIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjsNCiAgLW1zLWZsZXgtcGFjazogY2VudGVyOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsNCiAgLW1zLWZsZXgtYWxpZ246IGNlbnRlcjsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICB3aWR0aDogMTAwJTsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLnNlcGFyYXRvciAubGluZSB7DQogIC13ZWJraXQtYm94LWZsZXg6IDE7DQogIC1tcy1mbGV4OiBhdXRvOw0KICBmbGV4OiBhdXRvOw0KICBoZWlnaHQ6IDFweDsNCiAgYmFja2dyb3VuZDogI2VlZTsNCn0NCg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/pages/login","sourcesContent":["<template>\r\n  <div>\r\n    <div\r\n      style=\"width: 100px;height: 100px;position: absolute;left: 50%;top: 10%;margin: -50px 0 0 -50px;\"\r\n    >\r\n      <img src=\"../../../public/NewNoteLogo.jpg\" width=\"100px\" height=\"100px\" border-radius=\"10px\" />\r\n    </div>\r\n    <div\r\n      style=\"height: 500px;width: 500px; position: absolute;left: 50%;top: 50%;margin: -250px 0 0 -250px;\"\r\n    >\r\n      <el-tabs\r\n        v-model=\"activeName\"\r\n        type=\"border-card\"\r\n        @tab-click=\"handleClick\"\r\n        stretch=\"false\"\r\n      >\r\n        <el-tab-pane label=\"登录\" name=\"first\">\r\n          <br />\r\n          <div id=\"content\">\r\n            <div class=\"login-header\"></div>\r\n            <form>\r\n              <span class=\"icon icon-user\"></span>\r\n              <!-- <div> \r\n                  <img src=\"../../../public/user.png\" />\r\n                  \r\n              </div> -->\r\n              <el-input\r\n                v-model=\"loginUsername\"\r\n                placeholder=\"请输入用户名\">\r\n              </el-input>\r\n              <br />\r\n              <br />\r\n              <span class=\"icon icon-password\"></span>\r\n              <el-input\r\n                show-password\r\n                v-model=\"loginPassword\"\r\n                placeholder=\"请输入密码\"\r\n              ></el-input>\r\n            </form>\r\n            <br />\r\n            <el-form :inline=\"true\" :model=\"formInline\">\r\n              <el-form-item>\r\n                <el-switch\r\n                  v-model=\"radio\"\r\n                  active-color=\"#666666\"\r\n                  inactive-color=\"#666666\"\r\n                  active-value=\"1\"\r\n                  inactive-value=\"2\"\r\n                  active-text=\"用户\"\r\n                  inactive-text=\"管理员\"\r\n                >\r\n                </el-switch>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-checkbox v-model=\"rememberpassword\" style=\"margin-left:5%;\"\r\n                  >记住密码</el-checkbox\r\n                >\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <div\r\n                  v-show=\"showRentPrise\"\r\n                  style=\"color: red;margin-left: 20px;\"\r\n                >\r\n                  &nbsp;&nbsp;密码错误\r\n                </div>\r\n              </el-form-item>\r\n            </el-form>\r\n\r\n            <div class=\"login-button-box\">\r\n              <el-button\r\n                @click.native=\"loginbutton\"\r\n                style=\"height: 50px;\r\n                        width: 100%;\r\n                        background-color: #deb887;\r\n                        margin-top: 17px;\r\n                        background: #2dbe61;\r\n                        border: 1px solid #1fae52;\r\n                        border-radius: 6px;\r\n                        font-size: 14px;\r\n                        color: #fff;\r\n                        margin-bottom: 10px;\r\n                        cursor: pointer;\"\r\n                >登录\r\n                </el-button>\r\n            </div>\r\n            <div class=\"separator\">\r\n              <div class=\"line\"></div>\r\n              <p class=\"text\">或</p>\r\n              <div class=\"line\"></div>\r\n            </div>\r\n            <div class=\"login-button-box\">\r\n              <el-button\r\n                style=\"height: 50px;\r\n                        width: 100%;\r\n                        background-color: #3B9BFF;\r\n                        margin-top: 17px;\r\n                        background: #0a83b3;\r\n                        border: 1px solid #186ef0;\r\n                        border-radius: 6px;\r\n                        font-size: 14px;\r\n                        color: #fff;\r\n                        margin-bottom: 10px;\r\n                        cursor: pointer;\"\r\n                @click=\"JumpToAli\"\r\n                >使用支付宝登陆</el-button\r\n              >\r\n            </div>\r\n          </div>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane label=\"注册\" name=\"second\">\r\n          <el-form :inline=\"true\" :model=\"formInline\">\r\n            <el-form-item>\r\n              <el-input\r\n                v-model=\"inputusername\"\r\n                placeholder=\"请输入用户名\"\r\n                style=\"display:inline;\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button\r\n                @click=\"checkeusername\"\r\n                style=\"height: 40px;\r\n    width: 100%;\"\r\n                >是否能注册该用户名</el-button\r\n              >\r\n            </el-form-item>\r\n          </el-form>\r\n          <el-input v-model=\"inputemail\" placeholder=\"请输入邮箱\"></el-input>\r\n          <br />\r\n\r\n          <el-button\r\n            @click=\"checkemail\"\r\n            style=\"height: 40px;\r\n    width: 100%;\r\n    margin-top: 17px;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    margin-bottom: 17px;\r\n    cursor: pointer;\"\r\n            >发送验证码</el-button\r\n          >\r\n          <br />\r\n          <el-input\r\n            show-password\r\n            v-model=\"inputpassword\"\r\n            placeholder=\"请输入密码\"\r\n          ></el-input>\r\n          <br />\r\n          <br />\r\n          <el-input\r\n            v-model=\"inputcheckcode\"\r\n            placeholder=\"请输入验证码\"\r\n          ></el-input>\r\n          <br />\r\n          <br />\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"subregister\"\r\n            style=\"height: 50px;\r\n    width: 100%;\r\n    background-color: #deb887;\r\n    margin-top: 17px;\r\n    background: #2dbe61;\r\n    border: 1px solid #1fae52;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    color: #fff;\r\n    margin-bottom: 10px;\r\n    cursor: pointer;\"\r\n            >注 册</el-button\r\n          >\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/network/request\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  component: {},\r\n  data() {\r\n    return {\r\n      client_id: \"web\",\r\n      client_secret: \"web\",\r\n      grant_type: \"password\",\r\n      inputemail: \"\",\r\n      inputcheckcode: \"\",\r\n      inputusername: \"\",\r\n      inputpassword: \"\",\r\n      dialogVisible: false,\r\n      json: {\r\n        checkCode: this.inputcheckcode,\r\n        email: this.inputemail,\r\n        password: this.inputpassword,\r\n        username: this.inputusername,\r\n      },\r\n      loginUsername: \"\",\r\n      loginPassword: \"\",\r\n      radio: \"1\",\r\n      activeName: \"first\",\r\n      showRentPrise: false,\r\n      rememberpassword: false,\r\n      accountInfo: \"\",\r\n\r\n      // client_id: 'web',\r\n      // client_secret: 'web',\r\n      // grant_type: 'password'\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getCookie();\r\n  },\r\n  methods: {\r\n    loginbutton() {\r\n      axios\r\n        .post(\r\n          \"http://120.76.128.222:8004/auth/oauth/token?client_id=web&client_secret=web&grant_type=password&username=\" +\r\n            this.loginUsername +\r\n            \"&password=\" +\r\n            this.loginPassword\r\n        )\r\n        .then((response) => {\r\n          console.log(response);\r\n          window.sessionStorage.setItem(\"Token\", response.data.access_token);\r\n          setTimeout(() => {\r\n            this.check();\r\n          }, 500);\r\n          // $window.seesionStorage.accessToken = this.user_token\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.showRentPrise = true;\r\n        });\r\n    },\r\n    check() {\r\n      var that = this;\r\n      if (this.rememberpassword == true) {\r\n        this.setCookie(\r\n          this.loginUsername,\r\n          this.loginPassword,\r\n          this.rememberpassword,\r\n          7\r\n        );\r\n      } else {\r\n        this.clearCookie();\r\n      }\r\n      if (this.radio == \"1\") {\r\n        if (sessionStorage.getItem(\"Token\")) {\r\n          this.$router.push(\"/userindex\");\r\n        } else {\r\n          alert(\"idk\");\r\n        }\r\n      } else if (this.radio == \"2\") {\r\n        request({\r\n          url: \"/auth/user/userInfo\",\r\n          method: \"get\",\r\n        })\r\n          .then((res) => {\r\n            this.accountInfo = res.data.data.roles;\r\n            if (JSON.stringify(this.accountInfo).indexOf(\"管理员\") > -1) {\r\n              if (sessionStorage.getItem(\"Token\")) {\r\n                this.$router.push(\"/adminindex\");\r\n              }\r\n            } else {\r\n              that.$message.error(\"您没有管理员权限\");\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            this.showRentPrise = true;\r\n          });\r\n      }\r\n    },\r\n    setCookie(c_name, c_pwd, c_rem, exdays) {\r\n      var exdate = new Date(); //获取时间\r\n      exdate.setTime(exdate.getTime() + 24 * 60 * 60 * 1000 * exdays); //保存的天数\r\n      //字符串拼接cookie\r\n      window.document.cookie =\r\n        \"userName\" + \"=\" + c_name + \";path=/;expires=\" + exdate.toGMTString();\r\n      window.document.cookie =\r\n        \"userPwd\" + \"=\" + c_pwd + \";path=/;expires=\" + exdate.toGMTString();\r\n      window.document.cookie =\r\n        \"remenber\" + \"=\" + c_rem + \";path=/;expires=\" + exdate.toGMTString();\r\n    },\r\n    getCookie() {\r\n      if (document.cookie.length > 0) {\r\n        var arr = document.cookie.split(\"; \"); //这里显示的格式需要切割一下自己可输出看下\r\n        for (var i = 0; i < arr.length; i++) {\r\n          var arr2 = arr[i].split(\"=\"); //再次切割\r\n          //判断查找相对应的值\r\n          if (arr2[0] == \"userName\") {\r\n            this.loginUsername = arr2[1]; //保存到保存数据的地方\r\n          } else if (arr2[0] == \"userPwd\") {\r\n            this.loginPassword = arr2[1];\r\n          } else if (arr2[0] == \"remenber\") {\r\n            this.rememberpassword = arr2[1];\r\n          }\r\n        }\r\n      }\r\n    },\r\n    clearCookie() {\r\n      this.setCookie(\"\", \"\", -1); //修改2值都为空，天数为负1天就好了\r\n    },\r\n    sendemail() {\r\n      axios\r\n        .get(\"http://120.76.128.222:8004/auth/email/\" + this.inputemail)\r\n        .then(function(response) {\r\n          console.log(response);\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n\r\n    checkemail() {\r\n      var that = this;\r\n      axios\r\n        .get(\"http://120.76.128.222:8004/auth/user/email/\" + this.inputemail)\r\n        .then((response) => {\r\n          console.log(response.data.data);\r\n          if (response.data.data == true) {\r\n            this.sendemail();\r\n            that.$message({\r\n              message: \"邮件已发送\",\r\n              type: \"success\",\r\n            });\r\n          } else {\r\n            that.$message.error(\"该邮箱已被注册\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    checkeusername() {\r\n      var that = this;\r\n      axios\r\n        .get(\r\n          \"http://120.76.128.222:8004/auth/user/username/\" + this.inputusername\r\n        )\r\n        .then(function(response) {\r\n          console.log(response.data.data);\r\n          if (response.data.data == true) {\r\n            that.$message({\r\n              message: \"该用户名可注册\",\r\n              type: \"success\",\r\n            });\r\n          } else {\r\n            that.$message.error(\"该用户名不可注册\");\r\n          }\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    subregister() {\r\n      var that = this;\r\n      axios\r\n        .post(\"http://120.76.128.222:8004//auth/user\", {\r\n          checkCode: this.inputcheckcode,\r\n          email: this.inputemail,\r\n          password: this.inputpassword,\r\n          username: this.inputusername,\r\n        })\r\n        .then((response) => {\r\n          console.log(response);\r\n          console.log(response.data.data);\r\n          that.$message({\r\n            message: \"注册成功\",\r\n            type: \"success\",\r\n          });\r\n          this.router.go(0);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    JumpToAli() {\r\n      window.location.href =\r\n        \"https://openauth.alipay.com/oauth2/publicAppAuthorize.htm?app_id=2021001195608145&scope=auth_user&redirect_uri=http%3A%2F%2F120.76.128.222%3A8004%2Fauth%2Falipay%2Fweb\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.separator {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-pack: center;\r\n  -ms-flex-pack: center;\r\n  justify-content: center;\r\n  -webkit-box-align: center;\r\n  -ms-flex-align: center;\r\n  align-items: center;\r\n  -webkit-box-sizing: border-box;\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.separator .line {\r\n  -webkit-box-flex: 1;\r\n  -ms-flex: auto;\r\n  flex: auto;\r\n  height: 1px;\r\n  background: #eee;\r\n}\r\n</style>\r\n"]}]}